<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>GLSL内置变量 | byhj zzZ~~~</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="GLSL定义了许多内置变量，这些变量一般被用于固定管线的运算，这里主要介绍下各个变量的内容与用法。">
<meta property="og:type" content="article">
<meta property="og:title" content="GLSL内置变量">
<meta property="og:url" content="http://byhj.github.io/2016/05/02/GLSL(Built-in Variable)/index.html">
<meta property="og:site_name" content="byhj zzZ~~~">
<meta property="og:description" content="GLSL定义了许多内置变量，这些变量一般被用于固定管线的运算，这里主要介绍下各个变量的内容与用法。">
<meta property="og:updated_time" content="2016-05-02T15:18:03.312Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="GLSL内置变量">
<meta name="twitter:description" content="GLSL定义了许多内置变量，这些变量一般被用于固定管线的运算，这里主要介绍下各个变量的内容与用法。">
  
    <link rel="alternative" href="/atom.xml" title="byhj zzZ~~~" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
    <link rel="icon" href="/byhj.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/assets/img/byhj.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">byhj</a></h1>
		</hgroup>

		
		<p class="header-subtitle">世上的鲜花会盛开，壮丽不朽的事物会接踵而来</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/byhj" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/byhj" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Book/" style="font-size: 10px;">Book</a> <a href="/tags/C/" style="font-size: 17.5px;">C++</a> <a href="/tags/Cocos2dx/" style="font-size: 10px;">Cocos2dx</a> <a href="/tags/D3D/" style="font-size: 12.5px;">D3D</a> <a href="/tags/D3D12/" style="font-size: 12.5px;">D3D12</a> <a href="/tags/Direct3D/" style="font-size: 10px;">Direct3D</a> <a href="/tags/DirectX/" style="font-size: 15px;">DirectX</a> <a href="/tags/GUI/" style="font-size: 10px;">GUI</a> <a href="/tags/Math/" style="font-size: 12.5px;">Math</a> <a href="/tags/OGRE/" style="font-size: 10px;">OGRE</a> <a href="/tags/OpenGL/" style="font-size: 20px;">OpenGL</a> <a href="/tags/OpenGL-GLSL/" style="font-size: 10px;">OpenGL GLSL</a> <a href="/tags/Pattern/" style="font-size: 10px;">Pattern</a> <a href="/tags/Qt静态编译-MSVC/" style="font-size: 10px;">Qt静态编译-MSVC</a> <a href="/tags/Vulkan/" style="font-size: 10px;">Vulkan</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">爱书爱自然的一只鱼~~</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">byhj</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/assets/img/byhj.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">byhj</h1>
			</hgroup>
			
			<p class="header-subtitle">世上的鲜花会盛开，壮丽不朽的事物会接踵而来</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/byhj" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/byhj" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-GLSL(Built-in Variable)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/02/GLSL(Built-in Variable)/" class="article-date">
  	<time datetime="2016-05-02T13:11:28.000Z" itemprop="datePublished">2016-05-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      GLSL内置变量
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenGL-GLSL/">OpenGL GLSL</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    
    <div class="article-entry" itemprop="articleBody">
  
    
    <div id="toc" class="article-toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vertex_shader_inputs"><span class="toc-number">1.</span> <span class="toc-text">Vertex shader inputs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_VertexID​"><span class="toc-number">1.1.</span> <span class="toc-text">gl_VertexID​</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vertex_shader_outputs"><span class="toc-number">2.</span> <span class="toc-text">Vertex shader outputs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_PerVertex​"><span class="toc-number">2.1.</span> <span class="toc-text">gl_PerVertex​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_Position"><span class="toc-number">2.2.</span> <span class="toc-text">gl_Position</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_PointSize​"><span class="toc-number">2.3.</span> <span class="toc-text">gl_PointSize​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_ClipDistance​"><span class="toc-number">2.4.</span> <span class="toc-text">gl_ClipDistance​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#同于用户自定义的裁剪计算，非负值说明顶点在裁剪面内，负值则被裁剪。"><span class="toc-number">2.5.</span> <span class="toc-text">同于用户自定义的裁剪计算，非负值说明顶点在裁剪面内，负值则被裁剪。</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Tessellation_Control_Shaders_input:"><span class="toc-number">3.</span> <span class="toc-text">Tessellation Control Shaders input:</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_PatchVerticesIn​"><span class="toc-number">3.1.</span> <span class="toc-text">gl_PatchVerticesIn​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_PrimitiveID​"><span class="toc-number">3.2.</span> <span class="toc-text">gl_PrimitiveID​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_InvocationID​"><span class="toc-number">3.3.</span> <span class="toc-text">gl_InvocationID​</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Tessellation_Control_Shaders_output:"><span class="toc-number">4.</span> <span class="toc-text">Tessellation Control Shaders output:</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Tessellation_evaluation_shader_inputs"><span class="toc-number">5.</span> <span class="toc-text">Tessellation evaluation shader inputs</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Tessellation_evaluation_shader_outputs"><span class="toc-number">6.</span> <span class="toc-text">Tessellation evaluation shader outputs</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Geometry_shader_inputs"><span class="toc-number">7.</span> <span class="toc-text">Geometry shader inputs</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Geometry_shader_outputs"><span class="toc-number">8.</span> <span class="toc-text">Geometry shader outputs</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Fragment_Shaders_input-"><span class="toc-number">9.</span> <span class="toc-text">Fragment Shaders input.</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_FragCoord​"><span class="toc-number">9.1.</span> <span class="toc-text">gl_FragCoord​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_FrontFacing​"><span class="toc-number">9.2.</span> <span class="toc-text">gl_FrontFacing​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_PointCoord​"><span class="toc-number">9.3.</span> <span class="toc-text">gl_PointCoord​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_SampleID​"><span class="toc-number">9.4.</span> <span class="toc-text">gl_SampleID​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_SampleMaskIn​"><span class="toc-number">9.5.</span> <span class="toc-text">gl_SampleMaskIn​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_ClipDistance​-1"><span class="toc-number">9.6.</span> <span class="toc-text">gl_ClipDistance​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_PrimitiveID​-1"><span class="toc-number">9.7.</span> <span class="toc-text">gl_PrimitiveID​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_Layer​"><span class="toc-number">9.8.</span> <span class="toc-text">gl_Layer​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_ViewportIndex​"><span class="toc-number">9.9.</span> <span class="toc-text">gl_ViewportIndex​</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Fragment_shader_outputs"><span class="toc-number">10.</span> <span class="toc-text">Fragment shader outputs</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_FragDepth​"><span class="toc-number">10.1.</span> <span class="toc-text">gl_FragDepth​</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Compute_Shaders_input-"><span class="toc-number">11.</span> <span class="toc-text">Compute Shaders input.</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_NumWorkGroups​"><span class="toc-number">11.1.</span> <span class="toc-text">gl_NumWorkGroups​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_WorkGroupID​"><span class="toc-number">11.2.</span> <span class="toc-text">gl_WorkGroupID​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_LocalInvocationID​"><span class="toc-number">11.3.</span> <span class="toc-text">gl_LocalInvocationID​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_GlobalInvocationID​"><span class="toc-number">11.4.</span> <span class="toc-text">gl_GlobalInvocationID​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gl_LocalInvocationIndex​"><span class="toc-number">11.5.</span> <span class="toc-text">gl_LocalInvocationIndex​</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Compute_shader_other_variables"><span class="toc-number">12.</span> <span class="toc-text">Compute shader other variables</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shaders_uniforms-"><span class="toc-number">13.</span> <span class="toc-text">Shaders  uniforms.</span></a></li></ol>
      <hr/>
    </div>
    
    <p>　  GLSL定义了许多内置变量，这些变量一般被用于固定管线的运算，这里主要介绍下各个变量的内容与用法。</p>
<a id="more"></a>
<h1 id="Vertex_shader_inputs">Vertex shader inputs</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_VertexID</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_InstanceID</span>;</span><br></pre></td></tr></table></figure>
<h2 id="gl_VertexID​">gl_VertexID​</h2><p>因为Vertex Shader对每个Vertex执行一次，所以gl_VertexID是Vertex Shader当前处理的顶点的索引。</p>
<p>gl_InstanceID​<br>在执行Instance绘制时，gl_InstanceID是当前实例的索引值，当没有进行Instance绘制时它是默认的0值。</p>
<h1 id="Vertex_shader_outputs">Vertex shader outputs</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">out</span> <span class="built_in">gl_PerVertex</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">vec4</span> <span class="built_in">gl_Position</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_PointSize</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_ClipDistance</span>[];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="gl_PerVertex​">gl_PerVertex​</h2><p>Vertex Shader的输出结构，在开启光栅化时会被传输。</p>
<h2 id="gl_Position">gl_Position</h2><p>一般是在Vertex Shader经过Model View Proj矩阵变换过的Vertex数据，此时数据位于clip-space， 数据是齐次坐标[x, y, z, w].</p>
<h2 id="gl_PointSize​">gl_PointSize​</h2><p>绘制像素点大小，在绘制point primitives时有效。</p>
<h2 id="gl_ClipDistance​">gl_ClipDistance​</h2><h2 id="同于用户自定义的裁剪计算，非负值说明顶点在裁剪面内，负值则被裁剪。">同于用户自定义的裁剪计算，非负值说明顶点在裁剪面内，负值则被裁剪。</h2><h1 id="Tessellation_Control_Shaders_input:">Tessellation Control Shaders input:</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_PatchVerticesIn</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_PrimitiveID</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_InvocationID</span>;</span><br></pre></td></tr></table></figure>
<h2 id="gl_PatchVerticesIn​">gl_PatchVerticesIn​</h2><p>每个patch多少个vertices</p>
<h2 id="gl_PrimitiveID​">gl_PrimitiveID​</h2><p>当前patch索引值</p>
<h2 id="gl_InvocationID​">gl_InvocationID​</h2><p>当前patch中vertices的索引值。</p>
<p>Tessellation control shader接受vertex shader的输出作为输入，需要注意的是，由于shader对每个patch执行一次，所以该结构是数组模式。</p>
 <figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="built_in">gl_PerVertex</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">vec4</span> <span class="built_in">gl_Position</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_PointSize</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_ClipDistance</span>[];</span><br><span class="line">&#125; <span class="built_in">gl_in</span>[<span class="built_in">gl_MaxPatchVertices</span>];</span><br></pre></td></tr></table></figure>
<p>结构内的变量含义在vertex shader那里已经说过了，gl_MaxPatchVertices是patch的顶点数，注意跟gl_PatchVerticesIn的区别。</p>
<h1 id="Tessellation_Control_Shaders_output:">Tessellation Control Shaders output:</h1> <figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">patch</span> <span class="keyword">out</span> <span class="keyword">float</span> <span class="built_in">gl_TessLevelOuter</span>[<span class="number">4</span>];</span><br><span class="line"><span class="keyword">patch</span> <span class="keyword">out</span> <span class="keyword">float</span> <span class="built_in">gl_TessLevelInner</span>[<span class="number">2</span>];</span><br></pre></td></tr></table></figure>
<p> 这个两个分量主要分别设置了patch的内外细分度</p>
<p>Tessellation Control Shader需要将vertex shader传入的数据继续传输下去，所以有类似的输出的结构体：</p>
 <figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">out</span> <span class="built_in">gl_PerVertex</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">vec4</span> <span class="built_in">gl_Position</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_PointSize</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_ClipDistance</span>[];</span><br><span class="line">&#125; <span class="built_in">gl_out</span>[];</span><br></pre></td></tr></table></figure>
<h1 id="Tessellation_evaluation_shader_inputs">Tessellation evaluation shader inputs</h1> <figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="keyword">vec3</span> <span class="built_in">gl_TessCoord</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_PatchVerticesIn</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_PrimitiveID</span>;</span><br></pre></td></tr></table></figure>
<p>gl_TessCoord​<br>细分坐标，利用插值可以产生新的细分顶点</p>
<p>gl_PatchVerticesIn​<br>与control中类似</p>
<p>gl_PrimitiveID​<br>当前patch的索引值</p>
<p>patch in float gl_TessLevelOuter[4];<br>patch in float gl_TessLevelInner[2];</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="built_in">gl_PerVertex</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">vec4</span> <span class="built_in">gl_Position</span>;</span><br><span class="line"> <span class="keyword">float</span> <span class="built_in">gl_PointSize</span>;</span><br><span class="line"> <span class="keyword">float</span> <span class="built_in">gl_ClipDistance</span>[];</span><br><span class="line">&#125; <span class="built_in">gl_in</span>[<span class="built_in">gl_MaxPatchVertices</span>];</span><br></pre></td></tr></table></figure>
<h1 id="Tessellation_evaluation_shader_outputs">Tessellation evaluation shader outputs</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">out</span> <span class="built_in">gl_PerVertex</span> &#123;</span><br><span class="line">  <span class="keyword">vec4</span> <span class="built_in">gl_Position</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_PointSize</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_ClipDistance</span>[];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>gl_Position​<br>产生细分数据的clip-space坐标值</p>
<p>gl_PointSize​<br>像素点大小</p>
<p>gl_ClipDistance​<br>自定义裁剪</p>
<hr>
<h1 id="Geometry_shader_inputs">Geometry shader inputs</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="built_in">gl_PerVertex</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">vec4</span> <span class="built_in">gl_Position</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_PointSize</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_ClipDistance</span>[];</span><br><span class="line">&#125; <span class="built_in">gl_in</span>[];</span><br></pre></td></tr></table></figure>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_PrimitiveIDIn</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_InvocationID</span>;  <span class="comment">//Requires GLSL 4.0 or ARB_gpu_shader5</span></span><br></pre></td></tr></table></figure>
<p>gl_PrimitiveIDIn​</p>
<p>gl_InvocationID​</p>
<h1 id="Geometry_shader_outputs">Geometry shader outputs</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">out</span> <span class="built_in">gl_PerVertex</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">vec4</span> <span class="built_in">gl_Position</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_PointSize</span>;</span><br><span class="line">  <span class="keyword">float</span> <span class="built_in">gl_ClipDistance</span>[];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>out int gl_PrimitiveID;<br>gl_PrimitiveID = gl_PrimitiveIDIn;</p>
<p>层次渲染通过一下变量实现：</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">out</span> <span class="keyword">int</span> <span class="built_in">gl_Layer</span>;</span><br><span class="line"><span class="keyword">out</span> <span class="keyword">int</span> <span class="built_in">gl_ViewportIndex</span>; <span class="comment">//Requires GL 4.1 or ARB_viewport_array.</span></span><br></pre></td></tr></table></figure>
<h1 id="Fragment_Shaders_input-">Fragment Shaders input.</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="keyword">vec4</span> <span class="built_in">gl_FragCoord</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">bool</span> <span class="built_in">gl_FrontFacing</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">vec2</span> <span class="built_in">gl_PointCoord</span>;</span><br></pre></td></tr></table></figure>
<h2 id="gl_FragCoord​">gl_FragCoord​</h2><p>The location of the fragment in window space. The X, Y and Z components are the window-space position of the fragment. The Z value will be written to the depth buffer if gl_FragDepth​ is not written to by this shader stage. The W component of gl_FragCoord​ is 1/Wclip, where Wclip is the interpolated W component of the clip-space vertex position output to gl_Position​ from the last Vertex Processing stage.<br>The space of gl_FragCoord​ can be modified by redeclaring gl_FragCoord​ with special input layout qualifiers:<br>layout(origin_upper_left) in vec4 gl_FragCoord;<br>This means that the origin for gl_FragCoord​’s window-space will be the upper-left of the screen, rather than the usual lower-left.<br>layout(pixel_center_integer​) in vec4 gl_FragCoord;<br>OpenGL window space is defined such that pixel centers are on half-integer boundaries. So the center of the lower-left pixel is (0.5, 0.5). Using pixel_center_integer​​ adjust gl_FragCoord​ such that whole integer values represent pixel centers.<br>Both of these exist to be compatible with D3D’s window space. Unless you need your shaders to have this compatibility, you are advised not to use these features.</p>
<h2 id="gl_FrontFacing​">gl_FrontFacing​</h2><p>This is true if this fragment was generated by the front-face of the primitive; it is false if it was generated by the back-face. Only triangle Primitives have a back face; fragments generated by all other primitives will always have this be set to true​.</p>
<h2 id="gl_PointCoord​">gl_PointCoord​</h2><p>The location within a point primitive that defines the position of the fragment relative to the side of the point. Points are effectively rasterized as window-space squares of a certain pixel size. Since points are defined by a single vertex, the only way to tell where in that square a particular fragment is is with gl_PointCoord​.<br>The values of gl_PointCoord​’s coordinates range from [0, 1]. OpenGL uses a upper-left origin for point-coordinates by default, so (0, 0) is the upper-left. However, the origin can be switched to a bottom-left origin by calling glPointParameteri(GL_POINT_SPRITE_COORD_ORIGIN, GL_LOWER_LEFT);​</p>
<p>OpenGL 4.0 and above define additional system-generated input values:</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_SampleID</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">vec2</span> <span class="built_in">gl_SamplePosition</span>;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">int</span> <span class="built_in">gl_SampleMaskIn</span>[];</span><br></pre></td></tr></table></figure>
<h2 id="gl_SampleID​">gl_SampleID​</h2><p>This is an integer identifier for the current sample that this fragment is rasterized for.<br>Warning: Any use of this variable at all will force this shader to be evaluated per-sample. Since much of the point of multisampling is to avoid that, you should use it only when you must.</p>
<p>##gl_SamplePosition​<br>This is the location of the current sample for the fragment within the pixel’s area, with values on the range [0, 1]. The origin is the bottom-left of the pixel area.<br>Warning: Any use of this variable at all will force this shader to be evaluated per-sample. Since much of the point of multisampling is to avoid that, you should use it only when you must.</p>
<h2 id="gl_SampleMaskIn​">gl_SampleMaskIn​</h2><p>When using multisampling, this variable contains a bitfield for the sample mask of the fragment being generated. The array is as long as needed to fill in the number of samples supported by the GL implementation.<br>Some Fragment shader built-in inputs will take values specified by OpenGL, but these values can be overridden by user control.</p>
<p>in float gl_ClipDistance[];<br>in int gl_PrimitiveID;</p>
<h2 id="gl_ClipDistance​-1">gl_ClipDistance​</h2><p>This array contains the interpolated clipping plane half-spaces, as output for vertices from the last Vertex Processing stage.</p>
<h2 id="gl_PrimitiveID​-1">gl_PrimitiveID​</h2><p>This value is the index of the current primitive being rendered by this drawing command. This includes any Tessellation applied to the mesh, so each individual primitive will have a unique index.<br>However, if a Geometry Shader is active, then the gl_PrimitiveID​ is exactly and only what the GS provided as output. Normally, gl_PrimitiveID​ is guaranteed to be unique, so if two FS invocations have the same primitive ID, they come from the same primitive. But if a GS is active and outputs non-unique values, then different fragment shader invocations for different primitives will get the same value. If the GS did not output a value for gl_PrimitiveID​, then the fragment shader gets an undefined value.</p>
<p>GL 4.3 provides the following additional inputs:<br>in int gl_Layer;<br>in int gl_ViewportIndex;</p>
<h2 id="gl_Layer​">gl_Layer​</h2><p>This is either 0 or the layer number for this primitive output by the Geometry Shader.</p>
<h2 id="gl_ViewportIndex​">gl_ViewportIndex​</h2><p>This is either 0 or the viewport index for this primitive output by the Geometry Shader.</p>
<h1 id="Fragment_shader_outputs">Fragment shader outputs</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">out</span> <span class="keyword">float</span> <span class="built_in">gl_FragDepth</span>;</span><br></pre></td></tr></table></figure>
<h2 id="gl_FragDepth​">gl_FragDepth​</h2><hr>
<h1 id="Compute_Shaders_input-">Compute Shaders input.</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">in</span> <span class="keyword">uvec3</span> gl_NumWorkGroups;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">uvec3</span> gl_WorkGroupID;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">uvec3</span> gl_LocalInvocationID;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">uvec3</span> gl_GlobalInvocationID;</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">uint</span>  gl_LocalInvocationIndex;</span><br></pre></td></tr></table></figure>
<h2 id="gl_NumWorkGroups​">gl_NumWorkGroups​</h2><p>This variable contains the number of work groups passed to the dispatch function.</p>
<h2 id="gl_WorkGroupID​">gl_WorkGroupID​</h2><p>This is the current work group for this shader invocation. Each of the XYZ components will be on the half-open range [0, gl_NumWorkGroups.XYZ).</p>
<h2 id="gl_LocalInvocationID​">gl_LocalInvocationID​</h2><p>This is the current invocation of the shader within the work group. Each of the XYZ components will be on the half-open range [0, gl_WorkGroupSize.XYZ​).</p>
<h2 id="gl_GlobalInvocationID​">gl_GlobalInvocationID​</h2><p>This value uniquely identifies this particular invocation of the compute shader among all invocations of this compute dispatch call. It’s a short-hand for the math computation:<br>gl_WorkGroupID * gl_WorkGroupSize + gl_LocalInvocationID;</p>
<h2 id="gl_LocalInvocationIndex​">gl_LocalInvocationIndex​</h2><p>This is a 1D version of gl_LocalInvocationID​. It identifies this invocation’s index within the work group. It is short-hand for this math computation:<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gl_LocalInvocationIndex =</span><br><span class="line">        gl_LocalInvocationID.z <span class="keyword">*</span> gl_WorkGroupSize.x <span class="keyword">*</span> gl_WorkGroupSize.y +</span><br><span class="line">        gl_LocalInvocationID.y <span class="keyword">*</span> gl_WorkGroupSize.x +</span><br><span class="line">        gl_LocalInvocationID.x;</span><br></pre></td></tr></table></figure></p>
<h1 id="Compute_shader_other_variables">Compute shader other variables</h1><p>const uvec3 gl_WorkGroupSize;   // GLSL ≥ 4.30</p>
<h1 id="Shaders_uniforms-">Shaders  uniforms.</h1><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> gl_DepthRangeParameters</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">float</span> near;</span><br><span class="line">    <span class="keyword">float</span> far;</span><br><span class="line">    <span class="keyword">float</span> diff;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">uniform</span> gl_DepthRangeParameters <span class="built_in">gl_DepthRange</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">uniform</span> <span class="keyword">int</span> gl_NumSamples; <span class="comment">//GLSL 4.20</span></span><br></pre></td></tr></table></figure>

  
</div>

    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/04/13/Vulkan-Introduction/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Vulkan</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="GLSL(Built-in Variable)" data-title="GLSL内置变量" data-url="http://byhj.github.io/2016/05/02/GLSL(Built-in Variable)/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 byhj
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>